Access token
Access token — это подпись пользователя в вашем приложении. Токен выдается после того, как пользователь авторизовался в сервисе с помощью VK ID. Он сообщает серверу, от имени какого пользователя выполняются запросы в API и какие права доступа пользователь выдал вашему приложению.
Срок жизни Acсess token ограничен и составляет 1 час.
Как получить токен
Для получения Access token используется код подтверждения. Такой код можно получить только с фронтенда приложения — требуется подтверждение пользователя, что он разрешает приложению обращаться к API от своего имени.
Есть два способа получения Access token по Authorization Code Flow:
(рекомендуемый) когда обмен авторизационного кода на токен происходит с бэкенда приложения. Это более безопасный способ, так как полученный токен будет храниться не в открытом виде, а на бэкенде — злоумышленнику сложнее добраться до токена;
когда обмен авторизационного кода на токен происходит с фронтенда приложения. Этот способ возможен, если у вашего приложения нет бэкенда.
Обязательно используйте расширение PKCE для защиты передаваемых данных.
Обратите внимание
Возможности обмена кода подтверждения на токены зависят от архитектуры вашего приложения и от того, какие параметры для поддержки PKCE сервис передал в SDK.
Если ваше веб-приложение разделяется на фронтенд и бэкенд и вы используете схему авторизации через SDK с обменом кода на бэкенде — обмен кода подтверждения на токены будет происходить через вызов id.vk.ru/oauth2/auth, где grant_type = authorization_code. Подробнее
Если такого разделения нет, используется только фронтенд и вы применяете схему авторизации через SDK с обменом кода на фронтенде, возможны варианты:
ваш сервис передал в SDK codeVerifier — код подтверждения можно обменять на токены с помощью метода SDK VKID.Auth.exchangeCode(code, device_id) или через вызов id.vk.ru/oauth2/auth, где grant_type = authorization_code. Подробнее;
ваш сервис не передал в SDK ни codeVerifier, ни codeChallenge — обмен возможен только через метод SDK VKID.Auth.exchangeCode(code, device_id).
Пример ответа
{
  "access_token": "vk2.a.8345jr...",
  "refresh_token": "vk2.a.yYug7h...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "user_id": 1234567890,
  "id_token": "JjkhU876UH...",
  "scope": "email phone"
}
Описание параметров ответа
Название	Описание
access_token	Access token пользователя
refresh_token	Refresh token, который предназначен для обновления Access token, срок жизни которого истекает
token_type	Тип выданного токена. Всегда принимает значение bearer
expires_in	Время в секундах, через которое срок действия Access token истекает
user_id	Идентификатор пользователя
id_token	ID token для получения данных о пользователе. Всегда принимает значение id_token
Инвалидация Access token
В SDK для Web инвалидировать токен и выполнить выход из аккаунта пользователя можно с помощью метода SDK VKID.Auth.login().
Пример использования
VKID.Auth.logout(access_token);
В результате работы метода и Access token, и Refresh token становятся невалидными.
Как с помощью токена узнать, подтверждён ли аккаунт пользователя
Серая галочка рядом с именем пользователя означает, что он указал в аккаунте подлинные личные данные и подтвердил их.
Эту информацию вы также можете получить с помощью метода users.get(). Он возвращает is_verified = true, если аккаунт пользователя подтверждён, или is_verified = false, если данные не подтверждены.